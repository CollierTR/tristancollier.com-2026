---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import FormattedDate from './FormattedDate.astro';
import CardLayoutGrid from '../layouts/CardLayoutGrid.astro'

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const featuredPosts = posts.slice(-2) // set number of posts for display
---

<CardLayoutGrid title="FEATURED POSTS" buttonTitle="See All Posts" buttonLink="/blog">
  {
    featuredPosts.map((post) => (
      <li>
        <a href={`/blog/${post.id}/`}>
          {post.data.heroImage && (
            <Image width={720} height={360} src={post.data.heroImage} alt="" />
          )}
          <h4 class="title">{post.data.title}</h4>
          <p class="date">
            <FormattedDate date={post.data.pubDate} />
          </p>
        </a>
      </li>
    ))
  }
</CardLayoutGrid>
